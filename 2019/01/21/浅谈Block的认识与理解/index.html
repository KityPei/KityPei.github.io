<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="iOSÂºÄÂèë,">










<meta name="description" content="ÂâçË®ÄÂú®iOS‰∏≠ÊúÄÂ∏∏Áî®Âà∞blockÂíåDelegateÔºåÊú¨ÁØáÊñáÁ´†Êú¨ÁùÄÂÜçÂ≠¶‰π†ÂÜçÊîπÈÄ†ÁöÑÂøÉÊÄÅÊï¥ÁêÜ‰∏Ä‰∏ãblock„ÄÇÂ¶ÇÊúâ‰∏çÂ¶•ÔºåÊúõËØ∑ÊåáÊïôüôèüôèüôè„ÄÇ Ê≠£ÊñáÁÆÄ‰ªãÊ¶ÇÂøµblockÊòØËãπÊûúÂÖ¨Âè∏‰ªéiOS 4ÂºÄÂßãÂºïÂÖ•ÁöÑÂØπCËØ≠Ë®ÄÁöÑÊâ©Â±ïÔºåÊòØÁî®Êù•ÂÆûÁé∞ÂåøÂêçÂáΩÊï∞ÁâπÊÄßÁöÑ„ÄÇblockÊòØ‰∏ÄÁßçÁâπÊÆäÁöÑÊï∞ÊçÆÁ±ªÂûãÔºåÂÆÉÂèØ‰ª•Ê≠£Â∏∏ÂÆö‰πâÂèòÈáè„ÄÅ‰Ωú‰∏∫ÂèÇÊï∞„ÄÅ‰Ωú‰∏∫ËøîÂõûÂÄºÔºåÁâπÊÆäÁöÑblockËøòÂèØ‰ª•‰øùÂ≠ò‰∏ÄÊÆµ‰ª£Á†Å„ÄÇ ËØ≠Ê≥ïËØ≠Ê≥ïË°®ËææÂºè ^ËøîÂõûÂÄºÁ±ªÂûãÔºàÂèÇÊï∞ÂàóË°®Ôºâ{Ë°®ËææÂºè}  B">
<meta name="keywords" content="iOSÂºÄÂèë">
<meta property="og:type" content="article">
<meta property="og:title" content="ÊµÖË∞àBlockÁöÑËÆ§ËØÜ‰∏éÁêÜËß£">
<meta property="og:url" content="http://yoursite.com/2019/01/21/ÊµÖË∞àBlockÁöÑËÆ§ËØÜ‰∏éÁêÜËß£/index.html">
<meta property="og:site_name" content="Katy Ë£¥">
<meta property="og:description" content="ÂâçË®ÄÂú®iOS‰∏≠ÊúÄÂ∏∏Áî®Âà∞blockÂíåDelegateÔºåÊú¨ÁØáÊñáÁ´†Êú¨ÁùÄÂÜçÂ≠¶‰π†ÂÜçÊîπÈÄ†ÁöÑÂøÉÊÄÅÊï¥ÁêÜ‰∏Ä‰∏ãblock„ÄÇÂ¶ÇÊúâ‰∏çÂ¶•ÔºåÊúõËØ∑ÊåáÊïôüôèüôèüôè„ÄÇ Ê≠£ÊñáÁÆÄ‰ªãÊ¶ÇÂøµblockÊòØËãπÊûúÂÖ¨Âè∏‰ªéiOS 4ÂºÄÂßãÂºïÂÖ•ÁöÑÂØπCËØ≠Ë®ÄÁöÑÊâ©Â±ïÔºåÊòØÁî®Êù•ÂÆûÁé∞ÂåøÂêçÂáΩÊï∞ÁâπÊÄßÁöÑ„ÄÇblockÊòØ‰∏ÄÁßçÁâπÊÆäÁöÑÊï∞ÊçÆÁ±ªÂûãÔºåÂÆÉÂèØ‰ª•Ê≠£Â∏∏ÂÆö‰πâÂèòÈáè„ÄÅ‰Ωú‰∏∫ÂèÇÊï∞„ÄÅ‰Ωú‰∏∫ËøîÂõûÂÄºÔºåÁâπÊÆäÁöÑblockËøòÂèØ‰ª•‰øùÂ≠ò‰∏ÄÊÆµ‰ª£Á†Å„ÄÇ ËØ≠Ê≥ïËØ≠Ê≥ïË°®ËææÂºè ^ËøîÂõûÂÄºÁ±ªÂûãÔºàÂèÇÊï∞ÂàóË°®Ôºâ{Ë°®ËææÂºè}  B">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-02-28T13:04:59.542Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ÊµÖË∞àBlockÁöÑËÆ§ËØÜ‰∏éÁêÜËß£">
<meta name="twitter:description" content="ÂâçË®ÄÂú®iOS‰∏≠ÊúÄÂ∏∏Áî®Âà∞blockÂíåDelegateÔºåÊú¨ÁØáÊñáÁ´†Êú¨ÁùÄÂÜçÂ≠¶‰π†ÂÜçÊîπÈÄ†ÁöÑÂøÉÊÄÅÊï¥ÁêÜ‰∏Ä‰∏ãblock„ÄÇÂ¶ÇÊúâ‰∏çÂ¶•ÔºåÊúõËØ∑ÊåáÊïôüôèüôèüôè„ÄÇ Ê≠£ÊñáÁÆÄ‰ªãÊ¶ÇÂøµblockÊòØËãπÊûúÂÖ¨Âè∏‰ªéiOS 4ÂºÄÂßãÂºïÂÖ•ÁöÑÂØπCËØ≠Ë®ÄÁöÑÊâ©Â±ïÔºåÊòØÁî®Êù•ÂÆûÁé∞ÂåøÂêçÂáΩÊï∞ÁâπÊÄßÁöÑ„ÄÇblockÊòØ‰∏ÄÁßçÁâπÊÆäÁöÑÊï∞ÊçÆÁ±ªÂûãÔºåÂÆÉÂèØ‰ª•Ê≠£Â∏∏ÂÆö‰πâÂèòÈáè„ÄÅ‰Ωú‰∏∫ÂèÇÊï∞„ÄÅ‰Ωú‰∏∫ËøîÂõûÂÄºÔºåÁâπÊÆäÁöÑblockËøòÂèØ‰ª•‰øùÂ≠ò‰∏ÄÊÆµ‰ª£Á†Å„ÄÇ ËØ≠Ê≥ïËØ≠Ê≥ïË°®ËææÂºè ^ËøîÂõûÂÄºÁ±ªÂûãÔºàÂèÇÊï∞ÂàóË°®Ôºâ{Ë°®ËææÂºè}  B">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Âçö‰∏ª'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/01/21/ÊµÖË∞àBlockÁöÑËÆ§ËØÜ‰∏éÁêÜËß£/">





  <title>ÊµÖË∞àBlockÁöÑËÆ§ËØÜ‰∏éÁêÜËß£ | Katy Ë£¥</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Katy Ë£¥</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">‰∏çÂøòÂàùÂøÉÔºåÊñπÂæóÂßãÁªà</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            È¶ñÈ°µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Ê†áÁ≠æ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            ÂàÜÁ±ª
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            ÂΩíÊ°£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/resume/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            ÂÖ≥‰∫é
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/21/ÊµÖË∞àBlockÁöÑËÆ§ËØÜ‰∏éÁêÜËß£/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kity Pei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Katy Ë£¥">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">ÊµÖË∞àBlockÁöÑËÆ§ËØÜ‰∏éÁêÜËß£</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">ÂèëË°®‰∫é</span>
              
              <time title="ÂàõÂª∫‰∫é" itemprop="dateCreated datePublished" datetime="2019-01-21T12:00:00+08:00">
                2019-01-21
              </time>
            

            

            
          </span>

          
            <span class="post-updated">
              &nbsp; | &nbsp; Êõ¥Êñ∞‰∫é
              <time itemprop="dateUpdated" datetime="2019-02-28T21:04:59+08:00" content="2019-02-28">
                2019-02-28
              </time>
            </span>
          

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">ÂàÜÁ±ª‰∫é</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Â≠¶‰π†Á¨îËÆ∞/" itemprop="url" rel="index">
                    <span itemprop="name">Â≠¶‰π†Á¨îËÆ∞</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <span class="post-meta-divider">|</span>
            <span id="busuanzi_value_page_pv"></span>Ê¨°ÈòÖËØª
          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Â≠óÊï∞ÁªüËÆ°&#58;</span>
                
                <span title="Â≠óÊï∞ÁªüËÆ°">
                  3.8k Â≠ó
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="ÂâçË®Ä"><a href="#ÂâçË®Ä" class="headerlink" title="ÂâçË®Ä"></a>ÂâçË®Ä</h1><p>Âú®iOS‰∏≠ÊúÄÂ∏∏Áî®Âà∞<code>block</code>Âíå<code>Delegate</code>ÔºåÊú¨ÁØáÊñáÁ´†Êú¨ÁùÄÂÜçÂ≠¶‰π†ÂÜçÊîπÈÄ†ÁöÑÂøÉÊÄÅÊï¥ÁêÜ‰∏Ä‰∏ã<code>block</code>„ÄÇÂ¶ÇÊúâ‰∏çÂ¶•ÔºåÊúõËØ∑ÊåáÊïôüôèüôèüôè„ÄÇ</p>
<h1 id="Ê≠£Êñá"><a href="#Ê≠£Êñá" class="headerlink" title="Ê≠£Êñá"></a>Ê≠£Êñá</h1><h2 id="ÁÆÄ‰ªã"><a href="#ÁÆÄ‰ªã" class="headerlink" title="ÁÆÄ‰ªã"></a>ÁÆÄ‰ªã</h2><h3 id="Ê¶ÇÂøµ"><a href="#Ê¶ÇÂøµ" class="headerlink" title="Ê¶ÇÂøµ"></a>Ê¶ÇÂøµ</h3><p><code>block</code>ÊòØËãπÊûúÂÖ¨Âè∏‰ªé<code>iOS 4</code>ÂºÄÂßãÂºïÂÖ•ÁöÑÂØπCËØ≠Ë®ÄÁöÑÊâ©Â±ïÔºåÊòØÁî®Êù•ÂÆûÁé∞ÂåøÂêçÂáΩÊï∞ÁâπÊÄßÁöÑ„ÄÇ<code>block</code>ÊòØ‰∏ÄÁßçÁâπÊÆäÁöÑÊï∞ÊçÆÁ±ªÂûãÔºåÂÆÉÂèØ‰ª•Ê≠£Â∏∏ÂÆö‰πâÂèòÈáè„ÄÅ‰Ωú‰∏∫ÂèÇÊï∞„ÄÅ‰Ωú‰∏∫ËøîÂõûÂÄºÔºåÁâπÊÆäÁöÑ<code>block</code>ËøòÂèØ‰ª•‰øùÂ≠ò‰∏ÄÊÆµ‰ª£Á†Å„ÄÇ</p>
<h3 id="ËØ≠Ê≥ï"><a href="#ËØ≠Ê≥ï" class="headerlink" title="ËØ≠Ê≥ï"></a>ËØ≠Ê≥ï</h3><h4 id="ËØ≠Ê≥ïË°®ËææÂºè"><a href="#ËØ≠Ê≥ïË°®ËææÂºè" class="headerlink" title="ËØ≠Ê≥ïË°®ËææÂºè"></a>ËØ≠Ê≥ïË°®ËææÂºè</h4><blockquote>
<p>^ËøîÂõûÂÄºÁ±ªÂûãÔºàÂèÇÊï∞ÂàóË°®Ôºâ{Ë°®ËææÂºè}</p>
</blockquote>
<h4 id="BlockÂá†ÁßçÂ∏∏ËßÅÂÜôÊ≥ï"><a href="#BlockÂá†ÁßçÂ∏∏ËßÅÂÜôÊ≥ï" class="headerlink" title="BlockÂá†ÁßçÂ∏∏ËßÅÂÜôÊ≥ï"></a>BlockÂá†ÁßçÂ∏∏ËßÅÂÜôÊ≥ï</h4><h5 id="Êó†ËøîÂõûÂÄºÊó†ÂèÇÊï∞"><a href="#Êó†ËøîÂõûÂÄºÊó†ÂèÇÊï∞" class="headerlink" title="Êó†ËøîÂõûÂÄºÊó†ÂèÇÊï∞:"></a>Êó†ËøîÂõûÂÄºÊó†ÂèÇÊï∞:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">void (^block)(void) = ^() &#123;</span><br><span class="line">    NSLog(@&quot;Êó†ËøîÂõûÊó†ÂèÇÁöÑBlock&quot;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="Êó†ËøîÂõûÂÄºÊúâÂçï‰∏ÄÂèÇÊï∞"><a href="#Êó†ËøîÂõûÂÄºÊúâÂçï‰∏ÄÂèÇÊï∞" class="headerlink" title="Êó†ËøîÂõûÂÄºÊúâÂçï‰∏ÄÂèÇÊï∞"></a>Êó†ËøîÂõûÂÄºÊúâÂçï‰∏ÄÂèÇÊï∞</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">void (^block)(int) = ^(int a) &#123;</span><br><span class="line">    NSLog(@&quot;a = %d&quot;, a);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="Êó†ËøîÂõûÂÄºÊúâÂ§öÂèÇÊï∞"><a href="#Êó†ËøîÂõûÂÄºÊúâÂ§öÂèÇÊï∞" class="headerlink" title="Êó†ËøîÂõûÂÄºÊúâÂ§öÂèÇÊï∞"></a>Êó†ËøîÂõûÂÄºÊúâÂ§öÂèÇÊï∞</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">void (^block)(int, int) = ^(int a, int b) &#123;</span><br><span class="line">    NSLog(@&quot;a+b = %d&quot;, a + b);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="ÊúâËøîÂõûÂÄºÊúâÂçï‰∏ÄÂèÇÊï∞"><a href="#ÊúâËøîÂõûÂÄºÊúâÂçï‰∏ÄÂèÇÊï∞" class="headerlink" title="ÊúâËøîÂõûÂÄºÊúâÂçï‰∏ÄÂèÇÊï∞"></a>ÊúâËøîÂõûÂÄºÊúâÂçï‰∏ÄÂèÇÊï∞</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">int (^block)(int) = ^(int a) &#123;</span><br><span class="line">    return a++;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="ÊúâËøîÂõûÂÄºÊúâÂ§öÂèÇÊï∞"><a href="#ÊúâËøîÂõûÂÄºÊúâÂ§öÂèÇÊï∞" class="headerlink" title="ÊúâËøîÂõûÂÄºÊúâÂ§öÂèÇÊï∞"></a>ÊúâËøîÂõûÂÄºÊúâÂ§öÂèÇÊï∞</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">int (^block)(int, int) = ^(int a, int b) &#123;</span><br><span class="line">    return a + b;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="Â∏∏ËßÅÁ±ªÂûã"><a href="#Â∏∏ËßÅÁ±ªÂûã" class="headerlink" title="Â∏∏ËßÅÁ±ªÂûã"></a>Â∏∏ËßÅÁ±ªÂûã</h3><p><code>block</code>Â∏∏ËßÅÁ±ªÂûãÊúâ‰∏âÁßç:</p>
<ul>
<li><code>NSGlobalBlock</code></li>
<li><code>NSMallocBlock</code></li>
<li><code>NSStackBlock</code></li>
</ul>
<p><code>NSGlobalBlock</code>ÊòØ<code>ÂÖ®Â±Äblock</code>,‰∏çÂºïÁî®Â§ñÈÉ®ÂèòÈáèÔºåÁõ∏ÂΩì‰∫é‰∏Ä‰∏™ÂáΩÊï∞ÔºåÂ≠òÊîæÂú®ÈùôÊÄÅÊï∞ÊçÆÂå∫Ôºõ</p>
<p><code>NSMallocBlock</code>ÊòØ<code>Ê†àBlock</code>,<code>block</code>Âú®ÂàùÂßãÂåñÁöÑÊó∂ÂÄôÔºåÊòØÂ≠òÊîæÂú®Ê†àÂÜÖÂ≠ò‰∏≠ÁöÑÔºåÊâÄ‰ª•Âè´ÂÅö<code>NSMallocBlock</code>,ÂΩì<code>NSMallocBlock</code>ÁöÑ‰ΩúÁî®Âüü‰∏ÄÁªìÊùüÔºåËØ•<code>block</code>ÊâÄÂç†ÊúâÁöÑÂÜÖÂ≠òÂ∞±‰ºöË¢´Á≥ªÁªüÈáäÊîæÔºõ</p>
<p><code>NSStackBlock</code>ÊòØ<code>Â†ÜBlock</code>ÔºåÁî±‰∫é<code>block</code>Âú®ÂàùÂßãÂåñÁöÑÊó∂ÂÄôÊòØÂ≠òÊîæÂú®Ê†à‰∏äÁöÑÔºåÊâÄ‰ª•Âú®<code>block</code>ÁöÑ‰ΩúÁî®ÂüüÁªìÊùüÁöÑÊó∂ÂÄôÔºåÂÖ∂ÊâÄÂç†ÂÜÖÂ≠òÁ©∫Èó¥Â∞±‰ºöË¢´Á≥ªÁªüÈáäÊîæÔºåÂÜç‰ªé‰ΩúÁî®ÂüüÂ§ñËÆøÈóÆËØ•<code>block</code>Êó∂‰ºöÈÄ†ÊàêÁ®ãÂ∫èÂ¥©Ê∫ÉÔºå‰∏∫ÈÅøÂÖçËøô‰∏ÄÊÉÖÂÜµÁöÑÂèëÁîüÔºåÈúÄË¶ÅÂ†Ü<code>NSMallocBlock</code>ËøõË°åcopyÔºåÂæóÂà∞<code>Â†ÜBlock</code>,Âπ∂‰∏î‰∫ßÁîüÂºïÁî®ËÆ°Êï∞„ÄÇ</p>
<h2 id="Âæ™ÁéØÂºïÁî®"><a href="#Âæ™ÁéØÂºïÁî®" class="headerlink" title="Âæ™ÁéØÂºïÁî®"></a>Âæ™ÁéØÂºïÁî®</h2><h3 id="Ê¶ÇÂøµ-1"><a href="#Ê¶ÇÂøµ-1" class="headerlink" title="Ê¶ÇÂøµ"></a>Ê¶ÇÂøµ</h3><p>Âæ™ÁéØÂºïÁî®Â∞±ÊòØ‰∏§‰∏™ÂØπË±°Èó¥ÂêÑÊúâ‰∏Ä‰∏™Âº∫ÂºïÁî®ÊåáÂêëÂØπÊñπÔºåËÄå<code>iOS</code>ËøõË°åÂÜÖÂ≠òÁÆ°ÁêÜÊó∂ÊòØÈááÁî®ÂºïÁî®ËÆ°Êï∞ÁöÑÔºåÂΩìÊúâÂº∫ÂºïÁî®ÊåáÂêëÁöÑÊó∂ÂÄôÔºå‰ºö‰ΩøÂºïÁî®ËÆ°Êï∞<code>+1</code>,ÂØºËá¥‰ªª‰ΩïÊó∂ÂÄôÈÉΩ‰∏çÂºïÁî®ËÆ°Êï∞ÈÉΩ‰∏ç‰ºö‰∏∫0ÔºåÊâÄÂç†ÊúâÁöÑÂÜÖÂ≠òÁ©∫Èó¥Êó†Ê≥ïÂæóÂà∞ÈáäÊîæÔºå‰ªéËÄåÂØºËá¥ÂÜÖÂ≠òÊ∂àËÄóËøáÈ´òÔºåÊÄßËÉΩÂèòÂ∑ÆÁîöËá≥Èó™ÈÄÄÁ≠â„ÄÇ</p>
<p><code>block</code>‰∏≠Âá∫Áé∞<code>Âæ™ÁéØÂºïÁî®</code>ÁöÑÁ§∫‰æã‰ª£Á†Å:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;ViewController.h&quot;</span><br><span class="line"></span><br><span class="line">typedef void (^KPBlock)(ViewController);</span><br><span class="line"></span><br><span class="line">@interface ViewController ()</span><br><span class="line"></span><br><span class="line">@property(nonatomic, strong) KPBlock block;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation ViewController</span><br><span class="line"></span><br><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    // Do any additional setup after loading the view, typically from a nib.</span><br><span class="line"></span><br><span class="line">    self.block = ^&#123;</span><br><span class="line">        NSLog(@&quot;%@&quot;,self.title);</span><br><span class="line">    &#125;;</span><br><span class="line">    self.block();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure></p>
<p><strong>‰ª•‰∏äÊòØ‰∏ÄÊÆµÂ≠òÂú®Âæ™ÁéØÂºïÁî®ÁöÑÈ´òÂç±‰ª£Á†Å</strong><br>È¢òÂ§ñËØùÔºö<code>Xcode</code>ÁúüÁöÑË∂äÊù•Ë∂äÂº∫Â§ß‰∫ÜÔºåÂΩìÊàëÊâìËøôÊÆµ‰ª£Á†ÅÁöÑÊó∂ÂÄôÔºå<code>Xcode</code>Â∞ΩÁÑ∂ÊúâË≠¶ÂëäÔºåÁõ∏ËæÉ‰∫éÂá†Âπ¥ÂâçÂÜô<code>Objective-C</code>ÁöÑÊó∂ÂÄôË∂äÊù•Ë∂äÂº∫Â§ß‰∫Ü„ÄÇ<code>Xcode</code>Ë≠¶ÂëäÂ¶Ç‰∏ã</p>
<blockquote>
<p><strong>Capturing ‚Äòself‚Äô strongly in this block is likely to lead to a retain cycle</strong></p>
</blockquote>
<p>ÊäõÂºÄË≠¶ÂëäËÆ§ËØÜ‰∏Ä‰∏ãÂæ™ÁéØÂºïÁî®Ôºå<code>block</code>Ë¢´Â£∞ÊòéÊàê<code>ViewController</code>ÁöÑÂ±ûÊÄß,ËØ¥Êòé<code>ViewController</code>ÂØπ<code>block</code>Êúâ‰∏Ä‰∏™Âº∫ÂºïÁî®ÔºåÂêåÊó∂Âú®<code>block</code>Ë∞ÉÁî®‰∫Ü<code>ViewController</code>ÁöÑ<code>name</code>Â±ûÊÄßÔºåËøôÊ†∑ÁöÑËØùÔºåËØ¥Êòé<code>block</code>‰πü‰ºöÂØπ<code>ViewController</code>Êúâ‰∏Ä‰∏™Âº∫ÂºïÁî®„ÄÇÂØºËá¥ÂΩìÂâç<code>ViewController</code>Âíå<code>Block</code>ÊâÄÂç†ÁöÑÂÜÖÂ≠òÁ©∫Èó¥Êó†Ê≥ïÂæó‰ª•ÈáäÊîæ„ÄÇ</p>
<h3 id="Ëß£ÂÜ≥ÊñπÊ°à"><a href="#Ëß£ÂÜ≥ÊñπÊ°à" class="headerlink" title="Ëß£ÂÜ≥ÊñπÊ°à"></a>Ëß£ÂÜ≥ÊñπÊ°à</h3><p><em>ËØ¥Êòé:‰ª•‰∏ãÊòØÈíàÂØπ‰∏äÈù¢Á§∫‰æãÁöÑËß£ÂÜ≥ÊñπÊ°àÔºå‰øÆÊîπ‰ª£Á†ÅÊòØÈíàÂØπ<code>viewDidLoad</code>ÁöÑ‰øÆÊîπ,Âπ∂ËøõË°å‰ª•‰∏ãÁÆÄÂçïÂàÜÊûê„ÄÇ</em></p>
<h4 id="Ëß£ÂÜ≥ÊñπÊ°à‰∏Ä"><a href="#Ëß£ÂÜ≥ÊñπÊ°à‰∏Ä" class="headerlink" title="Ëß£ÂÜ≥ÊñπÊ°à‰∏Ä"></a>Ëß£ÂÜ≥ÊñπÊ°à‰∏Ä</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    // Do any additional setup after loading the view, typically from a nib.</span><br><span class="line"></span><br><span class="line">    __weak typeof(self) weakSelf = self;</span><br><span class="line">    self.block = ^&#123;</span><br><span class="line">        __strong typeof(self) StrongSelf = weakSelf;</span><br><span class="line">        NSLog(@&quot;%@&quot;,StrongSelf.title);</span><br><span class="line">    &#125;;</span><br><span class="line">    self.block();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Áî±‰∏äÈù¢‰ª£Á†ÅÂèØ‰ª•ÁúãÂá∫ÂÖàÊòØ‰ΩøÁî®‰∫Ü<code>__weak</code>,ÁÑ∂ÂêéÂèà‰ΩøÁî®‰∫Ü<code>__strong</code>Êù•‰øÆÈ•∞<code>self</code>„ÄÇ‰∏∫‰ªÄ‰πàËøô‰πàÂÅöÂë¢Ôºü‰ΩøÁî®<code>__weak</code>‰øÆÈ•∞ÁöÑÂØπË±°ÔºåÂºïÁî®ËÆ°Êï∞‰∏ç‰ºö<code>+1</code>,‰πüÂ∞±ÊòØËØ¥Âú®<code>self</code>ÂØπË±°ÈáäÊîæÁöÑÊó∂ÂÄôÔºå<code>__weak</code>‰ºöÂ∞ÜÂºïÁî®ÁöÑ<code>self</code>ÂØπË±°ÁΩÆ‰∏∫<code>nil</code>,ËøôÊ†∑ÂÅöÁöÑËØù<code>ViewController</code>‰πüÂ∞±ÂèØ‰ª•Ê≠£Â∏∏ÈáäÊîæ‰∫ÜÔºå‰ΩÜÊòØËøô‰πàÂÅö‰ºöÂØºËá¥ÂèØËÉΩ<code>self</code>Ë¢´ÈáäÊîæ‰∫ÜÔºåËÄå<code>block</code>Êó†Ê≥ïÊ≠£Â∏∏ÊâßË°åÔºå‰∫éÊòØÂú®<code>block</code>ÂÜÖÈÉ®‰ΩøÁî®<code>__strong</code>,‰ΩøÁî®<code>__strong</code>ËøõË°åÂº∫ÂºïÁî®<code>self</code>ÂØπË±°ÔºåËøôÊ†∑ÁöÑËØùÔºåÂú®<code>block</code>ÊâßË°åÁöÑËøáÁ®ã‰∏≠Ôºå<code>ViewController</code>‰∏ç‰ºöË¢´ÈáäÊîæÔºåËÄåÂú®<code>block</code>ÊâßË°åÂÆå‰πüÂ∞±ÊòØ‰ΩúÁî®ÂüüÁªìÊùüÂêéÔºå<code>ViewController</code>ÁöÑÂºïÁî®ËÆ°Êï∞Â∞±‰ºö<code>-1</code>„ÄÇ</p>
<p><em>Ê≠§Â§ÑÈ¢ùÂ§ñÂàÜ‰∫´‰∏Ä‰∏™<code>ÂÆèÂÆö‰πâ</code>ÔºåÁÆÄÂÜô<code>__weak</code>Âíå<code>__strong</code></em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#define weakify(...) \</span><br><span class="line">    ext_keywordify \</span><br><span class="line">    metamacro_foreach_cxt(ext_weakify_,, __weak, __VA_ARGS__)</span><br><span class="line">#define strongify(...) \</span><br><span class="line">    ext_keywordify \</span><br><span class="line">    _Pragma(&quot;clang diagnostic push&quot;) \</span><br><span class="line">    _Pragma(&quot;clang diagnostic ignored \&quot;-Wshadow\&quot;&quot;) \</span><br><span class="line">    metamacro_foreach(ext_strongify_,, __VA_ARGS__) \</span><br><span class="line">    _Pragma(&quot;clang diagnostic pop&quot;)</span><br></pre></td></tr></table></figure>
<h4 id="Ëß£ÂÜ≥ÊñπÊ°à‰∫å"><a href="#Ëß£ÂÜ≥ÊñπÊ°à‰∫å" class="headerlink" title="Ëß£ÂÜ≥ÊñπÊ°à‰∫å"></a>Ëß£ÂÜ≥ÊñπÊ°à‰∫å</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    // Do any additional setup after loading the view, typically from a nib.</span><br><span class="line"></span><br><span class="line">    __block ViewController *vc = self;</span><br><span class="line">    self.block = ^&#123;</span><br><span class="line">        NSLog(@&quot;%@&quot;,vc.title);</span><br><span class="line">        vc = nil;</span><br><span class="line">    &#125;;</span><br><span class="line">    self.block();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Áî±‰ª•‰∏ä‰ª£Á†ÅÂèØ‰ª•ÁúãÂà∞Ôºå‰ΩøÁî®<code>__block</code>Êù•‰øÆÈ•∞vcÔºåÂπ∂‰∏îÂú®<code>block</code>ÂÜÖÈÉ®Â∞Ü‰øÆÈ•∞ÁöÑÂØπË±°ÁΩÆ‰∏∫<code>nil</code>,ÂÖ∂ÂÆû<code>__block</code>ÁöÑ‰ΩúÁî®ÊòØÊèêÂçáÂ§ñÈÉ®ÂèòÈáèÁöÑ‰ΩúÁî®Âüü, Â∞ÜÂ§ñÈÉ®ÂèòÈáèÊã∑Ë¥ùÂà∞Â†ÜÂÜÖÂ≠ò‰∏≠ÔºåÂêåÊó∂Â§ñÈÉ®ÂèòÈáè‰πüÂ∞±‰∫ßÁîü‰∫ÜÂÜÖÂ≠òËÆ°Êï∞ÔºåÊâÄ‰ª•ÈúÄË¶ÅÂú®<code>block</code>‰ΩúÁî®ÂüüÂÆåÊàêÊó∂ÔºåÂ∞ÜÂÖ∂ÁΩÆ‰∏∫<code>nil</code>„ÄÇ</p>
<h4 id="Ëß£ÂÜ≥ÊñπÊ°à‰∏â"><a href="#Ëß£ÂÜ≥ÊñπÊ°à‰∏â" class="headerlink" title="Ëß£ÂÜ≥ÊñπÊ°à‰∏â"></a>Ëß£ÂÜ≥ÊñπÊ°à‰∏â</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;ViewController.h&quot;</span><br><span class="line"></span><br><span class="line">typedef void (^KPBlock)(ViewController *);</span><br><span class="line"></span><br><span class="line">@interface ViewController ()</span><br><span class="line"></span><br><span class="line">@property(nonatomic, strong) KPBlock block;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation ViewController</span><br><span class="line"></span><br><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    // Do any additional setup after loading the view, typically from a nib.</span><br><span class="line"></span><br><span class="line">    self.block = ^(ViewController *vc) &#123;</span><br><span class="line">        NSLog(@&quot;%@&quot;,vc.title);</span><br><span class="line">    &#125;;</span><br><span class="line">    self.block(self);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p>Áî±‰∏äÈù¢ÁöÑ‰ª£Á†Å‰∏çÈöæÁúãÂá∫ÔºåÊàëÊñ∞Â¢û‰∫Ü<code>block</code>ÁöÑÂèÇÊï∞ÔºåÂèÇÊï∞Áõ∏ÂΩì‰∫éÈõ∂Êó∂ÊåÅÊúâÁöÑÊàêÂëòÂèòÈáèÔºå‰πãÊâÄ‰ª•Ëøô‰πàËß£ÂÜ≥ÊòØÂà©Áî®‰∫Ü<code>block</code>ÁöÑ‰ΩúÁî®Âüü„ÄÇ</p>
<h2 id="Â∫ïÂ±ÇÂéüÁêÜ"><a href="#Â∫ïÂ±ÇÂéüÁêÜ" class="headerlink" title="Â∫ïÂ±ÇÂéüÁêÜ"></a>Â∫ïÂ±ÇÂéüÁêÜ</h2><h3 id="Â∫ïÂ±ÇÁ†îÁ©∂ËøáÁ®ã"><a href="#Â∫ïÂ±ÇÁ†îÁ©∂ËøáÁ®ã" class="headerlink" title="Â∫ïÂ±ÇÁ†îÁ©∂ËøáÁ®ã"></a>Â∫ïÂ±ÇÁ†îÁ©∂ËøáÁ®ã</h3><p><strong>‰∏çÂºïÁî®Â§ñÈÉ®ÂèòÈáèÁöÑ<code>block</code>:</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;stdio.h&quot;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    void(^block)(void) = ^&#123;</span><br><span class="line">        printf(&quot;\n Hello Word&quot;);</span><br><span class="line">    &#125;;</span><br><span class="line">    block();</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ÈÄöËøá<code>clang</code>ÂëΩ‰ª§Â∞Ü‰∏äËø∞<code>C</code>‰ª£Á†ÅËΩ¨ÂåñÊàê<code>C++</code>‰ª£Á†ÅÔºåÂëΩ‰ª§Â¶Ç‰∏ã:</p>
<blockquote>
<p>clang -rewrite-objc ÈúÄËΩ¨Êç¢Êñá‰ª∂Âêç.c -o ÁõÆÊ†áÊñá‰ª∂Âêç.cpp</p>
</blockquote>
<p>ÂæóÂà∞‰ª•‰∏ã<code>C++</code>‰ª£Á†ÅÂêéÔºåÊâìÂºÄ‰∏ÄÁúãÂ∞±Â•ΩÂá†ÁôæË°å‰ª£Á†ÅÔºåÂèØËÉΩÂ¶ÇÊàë‰∏ÄÊ†∑Áû¨Èó¥ÊáµÈÄºÔºå‰ΩÜÊòØ‰Ωú‰∏∫Êñ∞Êó∂‰ª£ÁöÑÂõõÊó†ÈùíÂπ¥ÔºåÊàë‰ª¨ËøòÊòØÊúâ‰∏ÄÂèåËÉΩÊâæÂà∞ÈáçË¶ÅÂú∞ÊñπÁöÑÊÖßÁúºÁöÑÔºåÊàë‰ª¨ÊääËΩ¨ÂåñÂêéÁöÑ<code>C++</code>Êñá‰ª∂ÊªëÂÜªÂà∞ÊúÄ‰∏ãÈù¢ÔºåÂ∞±ÊâæÂà∞‰∫ÜÊàë‰ª¨ÁÅ∞Â∏∏ÁÜüÊÇâÁöÑ<code>main</code>ÂáΩÊï∞„ÄÇÂ¶Ç‰∏ãÊâÄÁ§∫:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">int main() &#123;</span><br><span class="line">    void(*block)(void) = ((void (*)())&amp;__main_block_impl_0((void *)__main_block_func_0, &amp;__main_block_desc_0_DATA));</span><br><span class="line">    ((void (*)(__block_impl *))((__block_impl *)block)-&gt;FuncPtr)((__block_impl *)block);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>‰ªé‰∏äÈù¢ÁöÑ‰ª£Á†ÅÂèØ‰ª•ÁúãÂá∫Âú®ËΩ¨Êç¢ÂæóÂà∞ÁöÑ<code>C++</code>‰ª£Á†ÅÈáåÈù¢Ôºå<code>block</code>Âú®ÂÆö‰πâÁöÑÊó∂ÂÄôË∞ÉÁî®<code>__main_block_impl_0</code>ÂáΩÊï∞ÔºåÂπ∂‰∏îÂ∞Ü<code>__main_block_impl_0</code>ÂáΩÊï∞ÁöÑÂú∞ÂùÄËµãÂÄºÁªô‰∫Ü<code>block</code>„ÄÇÁªßÁª≠Êü•Áúã<code>__main_block_impl_0</code>ÔºåÂ¶Ç‰∏ãÊâÄÁ§∫:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">struct __main_block_impl_0 &#123;</span><br><span class="line">  struct __block_impl impl;</span><br><span class="line">  struct __main_block_desc_0* Desc;</span><br><span class="line">  __main_block_impl_0(void *fp, struct __main_block_desc_0 *desc, int flags=0) &#123;</span><br><span class="line">    impl.isa = &amp;_NSConcreteStackBlock;</span><br><span class="line">    impl.Flags = flags;</span><br><span class="line">    impl.FuncPtr = fp;</span><br><span class="line">    Desc = desc;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>Êúâ‰∏äËø∞Ê∫êÁ†ÅÂèØ‰ª•ÁúãÂá∫Êù•<code>__main_block_impl_0</code>‰æùÊóßÊòØ‰∏™ÁªìÊûÑ‰Ωì,ÂêåÊó∂ËøòÂåÖÂê´‰∫Ü‰∏Ä‰∏™ÂêåÂêçÊûÑÈÄ†ÂáΩÊï∞ÔºåÊûÑÈÄ†ÂáΩÊï∞‰∏≠ÂØπ‰∏Ä‰∫õÂèòÈáèËøõË°åËµãÂÄº‰πãÂêéÊúÄÁªàËøîÂõû‰∏Ä‰∏™ÁªìÊûÑ‰Ωì„ÄÇÈÇ£‰πàÂ∞±ÊòØËØ¥ÊúÄÁªàÂ∞Ü‰∏Ä‰∏™<code>__main_block_impl_0</code>ÁªìÊûÑ‰ΩìÁöÑÂú∞ÂùÄËµãÂÄºÁªô‰∫Ü<code>block</code>ÂèòÈáè„ÄÇÊàë‰ª¨Âú®<code>__main_block_impl_0</code>ÁªìÊûÑ‰ΩìÂÜÖÁöÑÊûÑÈÄ†ÂáΩÊï∞ÂèØ‰ª•ÂèëÁé∞<code>__main_block_impl_0</code>ÊûÑÈÄ†ÂáΩÊï∞‰º†ÂÖ•‰∫Ü2‰∏™ÂèÇÊï∞(<code>__main_block_func_0</code>Âíå<code>&amp;__main_block_desc_0_DATA</code>),Âõ†‰∏∫<code>flags</code>ÊòØÊúâÈªòËÆ§ÂÄºÁöÑÔºåÊâÄ‰ª•ÁúÅÁï•Ê≤°‰º†„ÄÇÊé•‰∏ãÊù•Êàë‰ª¨Êü•Áúã‰∏Ä‰∏ã<code>__main_block_func_0</code>Âíå<code>&amp;__main_block_desc_0_DATA</code>Ëøô‰∏§‰∏™ÂèÇÊï∞ÂàÜÂà´‰ª£Ë°®ÁùÄ‰ªÄ‰πàÔºüÂèëÁé∞‰ª£Á†ÅÈáåÈù¢ÊúâÂÖ≥<code>__main_block_func_0</code>ÊúâÂ¶Ç‰∏ã‰∏ÄÊÆµ‰ª£Á†Å:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">static void __main_block_func_0(struct __main_block_impl_0 *__cself) &#123;</span><br><span class="line"></span><br><span class="line">        printf(&quot;\n Hello Word&quot;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>Áî±‰∏äÈù¢‰ª£Á†ÅÔºåÊàë‰ª¨‰∏çÈöæÂèëÁé∞Ôºå<code>__main_block_func_0</code>ÂáΩÊï∞ÈáåÈù¢Â∞±ÊòØÊàë‰ª¨Âú®<code>OC</code>‰∏≠ÂÆö‰πâÁöÑ<code>block</code>ÂÜÖÈÉ®ÁöÑÈÇ£ÊÆµ‰ª£Á†Å„ÄÇÁî±Ê≠§‰∏çÈöæÁúãÂá∫Ôºå<code>__main_block_func_0</code>ÂáΩÊï∞‰∏≠ÂÖ∂ÂÆûÁ≤óÂ§ÑÁùÄÊàë‰ª¨Âú®<code>block</code>‰∏≠ÂÜôÁöÑ‰ª£Á†Å„ÄÇËÄå<code>__main_block_impl_0</code>ÂáΩÊï∞‰∏≠‰º†ÂÖ•ÁöÑÊòØ<code>(void *)__main_block_func_0</code>,‰πüÂ∞±ÊòØÂ∞ÜÊàë‰ª¨ÂÜôÂú®<code>block</code>Âùó‰∏≠ÁöÑ‰ª£Á†ÅÂ∞ÅË£ÖÊàê‰∫Ü<code>__main_block_func_0</code>ÂáΩÊï∞ÔºåÂπ∂Â∞Ü<code>__main_block_func_0</code>ÂáΩÊï∞Âú∞ÂùÄ‰º†ÂÖ•‰∫Ü<code>__main_block_impl_0</code>ÁöÑÊûÑÈÄ†ÂáΩÊï∞‰∏≠‰øùÂ≠òÂú®ÁªìÊûÑ‰Ωì‰∏≠„ÄÇ</p>
<p>ÈÇ£‰πà<code>&amp;__main_block_desc_0_DATA</code>ÂèàÊòØ‰ªÄ‰πàÔºü<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">static struct __main_block_desc_0 &#123;</span><br><span class="line">  size_t reserved;</span><br><span class="line">  size_t Block_size;</span><br><span class="line">&#125; __main_block_desc_0_DATA = &#123; 0, sizeof(struct __main_block_impl_0)&#125;;</span><br></pre></td></tr></table></figure></p>
<p>Êàë‰ª¨‰ªé‰∏äËø∞‰ª£Á†ÅÂèØ‰ª•ÁúãÂá∫Êù•ÔºåÁªìÊûÑ‰Ωì<code>__main_block_desc_0</code>‰∏≠ÂåÖÂê´‰∫Ü‰∏§‰∏™ÂèÇÊï∞ÔºåÂàÜÂà´ÊòØ<code>reserved</code>Âíå<code>Block_size</code>,Âπ∂‰∏î<code>reserved</code>Ë¢´ËµãÂÄº‰∏∫0ÔºåËÄå<code>Block_size</code>ÂàôÊòØÂ≠òÂÇ®Ëøô<code>__main_block_impl_0</code>Âç†ÊúâÁöÑÁ©∫Èó¥Â§ßÂ∞è„ÄÇÊúÄÁªàÂ∞Ü<code>__main_block_desc_0</code>ÁªìÊûÑ‰ΩìÁöÑÂú∞ÂùÄ‰º†ÂÖ•<code>__main_block_func_0</code>‰∏≠ÔºåËµãÂÄºÁªô‰∫Ü<code>Desc</code>„ÄÇ</p>
<p><strong>Áªº‰∏äÂæóÂá∫ÁöÑÁªìËÆ∫</strong>Ôºö<code>block</code>Â∫ïÂ±ÇÊòØ‰∏™ÁªìÊûÑ‰ΩìÊàñËÄÖËØ¥ÊòØÂØπË±°„ÄÇÂÖ∂‰∏≠Â≠òÂÇ®‰∫ÜÂØπË±°Âú∞ÂùÄÔºå‰πüÂèØ‰ª•ËØ¥ÊòØÁ±ªÂûãÂú∞ÂùÄ„ÄÇ<code>block</code>‰ª£Á†ÅÂùó‰∏≠ÁöÑ‰ª£Á†ÅË¢´Â∞ÅË£ÖÊàêÂáΩÊï∞ÔºåÂ≠òÊîæÂú®ÁªìÊûÑ‰Ωì‰∏≠ÔºåËøòÂ≠òÂÇ®ÁùÄÁªìÊûÑ‰ΩìÊâÄÂç†ÂÜÖÂ≠òÂ§ßÂ∞è„ÄÇ</p>
<p><strong>ÂºïÁî®Â§ñÈÉ®ÂèòÈáèÁöÑ<code>block</code>:</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;stdio.h&quot;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    int a = 100;</span><br><span class="line">    void(^block)(void) = ^&#123;</span><br><span class="line">        printf(&quot;\n a = %d&quot;, a);</span><br><span class="line">    &#125;;</span><br><span class="line">    block();</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>‰æùÊóßÊòØ‰ΩøÁî®<code>clang</code>ÂëΩ‰ª§ÔºåÂ∞Ü‰∏äËø∞ÁöÑ<code>c</code>ËØ≠Ë®Ä‰ª£Á†ÅËΩ¨Êç¢Êàê<code>c++</code>,ËøòÊòØËµ∞‰πãÂâçÁöÑË∑ØÂ≠êÔºåÂèëÁé∞<code>main</code>ÂáΩÊï∞<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">int main() &#123;</span><br><span class="line">    int a = 100;</span><br><span class="line">    void(*block)(void) = ((void (*)())&amp;__main_block_impl_0((void *)__main_block_func_0, &amp;__main_block_desc_0_DATA, a));</span><br><span class="line">    ((void (*)(__block_impl *))((__block_impl *)block)-&gt;FuncPtr)((__block_impl *)block);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>‰∏é‰πãÂâç<code>block</code>‰∏çÂºïÁî®Â§ñÈÉ®ÂèòÈáèÁöÑÊó∂ÂÄôÂæóÂà∞ÁöÑ<code>main</code>ÂáΩÊï∞ÂØπÊØîÔºåÂ§ö‰∫Ü‰∏Ä‰∫õ‰∏úË•øÔºåÈô§‰∫ÜmainÂ£∞ÊòéÁöÑ<code>a</code>ÂèòÈáè‰ª•Â§ñÔºåËøòÂèëÁé∞<code>__main_block_impl_0</code>Â§ö‰∫Ü‰∏Ä‰∏™ÂèÇÊï∞<code>a</code>„ÄÇÁÑ∂ÂêéÊàë‰ª¨ÈáçÊñ∞Êü•Áúã<code>__main_block_impl_0</code>ÔºåËøîÁé∞Ëøô‰∏™ÁªìÊûÑ‰ΩìÈáåÈù¢Áõ∏ËæÉ‰∫é‰πãÂâç‰∏çÂºïÁî®Â§ñÈÉ®ÂèòÈáèÊó∂ÔºåÂ§öÂá∫‰∫Ü‰∏Ä‰∏™ <code>int a</code>„ÄÇ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">struct __main_block_impl_0 &#123;</span><br><span class="line">  struct __block_impl impl;</span><br><span class="line">  struct __main_block_desc_0* Desc;</span><br><span class="line">  int a;</span><br><span class="line">  __main_block_impl_0(void *fp, struct __main_block_desc_0 *desc, int _a, int flags=0) : a(_a) &#123;</span><br><span class="line">    impl.isa = &amp;_NSConcreteStackBlock;</span><br><span class="line">    impl.Flags = flags;</span><br><span class="line">    impl.FuncPtr = fp;</span><br><span class="line">    Desc = desc;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>ËøôÊó∂ÂÄôÔºåÊàë‰ª¨ÂèØ‰ª•ÂæóÂá∫‰∏Ä‰∏™ÁªìËÆ∫ÔºöÂΩì<code>block</code>ÂºïÁî®Â§ñÈÉ®ÂèòÈáèÊó∂ÔºåÂèØ‰ª•Ëá™Âä®ÊçïËé∑Â§ñÈÉ®ÂèòÈáè„ÄÇ</p>
<p>Êàë‰ª¨ÁªßÁª≠Êü•ÁúãÊàë‰ª¨<code>block</code>‰º†ÂÖ•ÁöÑÂèÇÊï∞ÔºåËøòÊòØÈÇ£‰∏™‰∏ÄÊ®°‰∏ÄÊ†∑ÁöÑÂêçÂ≠ó<code>__main_block_func_0</code>,Ëøô‰∏™‰∏ú‰∏úÁöÑ‰ª£Á†Å:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">static void __main_block_func_0(struct __main_block_impl_0 *__cself) &#123;</span><br><span class="line">  int a = __cself-&gt;a; // bound by copy</span><br><span class="line"></span><br><span class="line">        printf(&quot;\n a = %d&quot;, a);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>‰∫éÊòØÊàë‰ª¨ÂèëÁé∞<code>int a = __cself-&gt;a;</code>,Ëøô‰∏™Êó∂ÂÄôÊàë‰ª¨‰∏çÈöæÂèëÁé∞Ê∫êÁ†ÅÈáåÈù¢ÁöÑ<code>int a = 100</code>Âíå‰∏äËø∞‰ª£Á†ÅÈáåÈù¢ÁöÑ<code>int a = __cself-&gt;a</code>‰∏≠ÁöÑ<code>a</code>‰∏çÊòØÂêå‰∏Ä‰∏™<code>a</code>„ÄÇ<br>Ëøô‰∏™Êó∂ÂÄôÔºåÊàë‰ª¨ÂèàÂèØ‰ª•ÂæóÂà∞‰∏Ä‰∏™ÁªìËÆ∫ÔºåÂΩìÂ¶Ç‰∏äËø∞ÊâÄËØ¥ÁöÑÂºïÁî®Â§ñÈÉ®ÂèòÈáèÊó∂Ôºå‰∏çËÉΩÁõ¥Êé•‰øÆÊîπÂ§ñÈÉ®ÂèòÈáèÁöÑÂÄº„ÄÇ</p>
<p><strong>Áªº‰∏äÂæóÂá∫ÁöÑÁªìËÆ∫:</strong><code>block</code>ÂºïÁî®Â§ñÈÉ®ÂèòÈáèÊó∂ÔºåÂèØ‰ª•Ëá™Âä®ÊçïËé∑Â§ñÈÉ®ÂèòÈáèÔºõ<code>block</code>Ëá™Âä®ÊçïËé∑ÁöÑÂ§ñÈÉ®ÂèòÈáèÂÆûÈôÖ‰∏äÂ∑≤Áªè‰øùÂ≠òÂú®<code>block</code>‰∏≠‰∫ÜÔºå‰πüÂ∞±ÊòØÂú®<code>__main_block_impl_0</code>ÁªìÊûÑ‰Ωì‰∏≠,ÊâÄ‰ª•<code>block</code>‰∏çÂèØ‰ª•Áõ¥Êé•‰øÆÊîπÊâÄÂºïÁî®ÁöÑÂ§ñÈÉ®ÂèòÈáèÁöÑÂÄº„ÄÇ</p>
<p><strong>‰øÆÊîπÂ§ñÈÉ®ÂèòÈáèÁöÑ<code>block</code>:</strong></p>
<p>‰∏äÈù¢ÁÆÄÂçïÁ†îÁ©∂‰∫Ü‰ª•‰∏ã<code>block</code>ÂºïÁî®Â§ñÈÉ®ÂèòÈáèÔºåÈÇ£‰πà<code>block</code>ÊÄé‰πàÊâçËÉΩ‰øÆÊîπÂºïÁî®ÁöÑÂ§ñÈÉ®ÂèòÈáèÂíßÔºü‰Ωú‰∏∫Â§öÂπ¥ÁöÑÁ†ÅÁïúÔºåÂèØËÉΩÁ¨¨‰∏Ä‰∏™ÊÉ≥Ê≥ïÂ∞±ÊòØ<code>__block</code>‰øÆÊîπÈúÄË¶Å‰øÆÊîπÁöÑÂ§ñÈÉ®ÂèòÈáèÂÄº,Â§öÂπ¥Êù•ÈÉΩËøô‰πàÂπ≤ÁöÑÔºå‰ΩÜÊòØ‰∏∫ÊØõËøôÊ†∑Â∞±Ë°å‰∫ÜÔºåÂú®Â≠¶‰π†<code>block</code>ÁöÑÊó∂ÂÄôËøòÊòØË¶ÅÁ†îÁ©∂‰ª•‰∏ãÁöÑ„ÄÇÂ∫üËØùÂ§ö‰∫ÜÔºåÁªßÁª≠Âπ≤„ÄÇ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;stdio.h&quot;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    __block int a = 10;</span><br><span class="line">    void(^block)(void) = ^&#123;</span><br><span class="line">        printf(&quot;\n a++ = %d&quot;, a++);</span><br><span class="line">    &#125;;</span><br><span class="line">    block();</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ËøòÊòØÈÇ£‰∏ÄÂ•óÁî®<code>clang</code>ÂëΩ‰ª§Â∞Ü‰∏äËø∞‰ª£Á†ÅËΩ¨Êàê<code>c++</code>‰ª£Á†ÅÔºåËøòÊòØÈÇ£‰∏ÄÂ•óË∑ØÊâæÊúÄÁÜüÊÇâÁöÑ<code>main</code>ÂáΩÊï∞„ÄÇ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">int main() &#123;</span><br><span class="line">    __attribute__((__blocks__(byref))) __Block_byref_a_0 a = &#123;(void*)0,(__Block_byref_a_0 *)&amp;a, 0, sizeof(__Block_byref_a_0), 10&#125;;</span><br><span class="line">    void(*block)(void) = ((void (*)())&amp;__main_block_impl_0((void *)__main_block_func_0, &amp;__main_block_desc_0_DATA, (__Block_byref_a_0 *)&amp;a, 570425344));</span><br><span class="line">    ((void (*)(__block_impl *))((__block_impl *)block)-&gt;FuncPtr)((__block_impl *)block);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ÈÄöËøá‰∏äÈù¢‰ª£Á†ÅË∑ü‰πãÂâçÁöÑÂè™ÊòØÂçïÁ∫ØÂºïÁî®Â§ñÈÉ®ÂèòÈáèÁöÑ‰ª£Á†ÅÂØπÊØîÔºåÂæàÊòéÊòæÂ§öÂá∫‰∫Ü‰∏ÄË°åÔºö<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">__attribute__((__blocks__(byref))) __Block_byref_a_0 a = &#123;(void*)0,(__Block_byref_a_0 *)&amp;a, 0, sizeof(__Block_byref_a_0), 10&#125;;</span><br></pre></td></tr></table></figure></p>
<p>ÈÄöËøá‰∏äÈù¢ÁöÑ‰ª£Á†Å‰∏≠ÁöÑ<code>&amp;a</code>ÂèØ‰ª•ÁúãÂá∫ÔºåÂ∞ÜÂ§ñÈÉ®ÂèòÈáèÁöÑÊåáÈíàÁ©∫Èó¥‰º†ÂÖ•ËøõÊù•‰∫ÜÔºåËøô‰∏™Á©∫Èó¥Â∞±Â≠òÂú®Â†Ü‰∏≠Ôºå<code>block</code>Âú®ÂÜÖÈÉ®‰øÆÊîπÂ§ñÈÉ®ÂºïÁî®ÂèòÈáèÊó∂ÊòØÈÄöËøáÂÜÖÈÉ®ÊåÅÊúâÁöÑÂ§ñÈÉ®ÂºïÁî®ÂèòÈáèÁöÑÊåáÈíàËøõË°å‰øÆÊîπÁöÑÔºåÁî±‰∫éÂ§ñÈÉ®ÂèòÈáèÁöÑÊåáÈíà‰º†ÂÖ•Âà∞<code>block</code>ÂÜÖÈÉ®ÔºåÂÜÖÈÉ®ÂºïÁî®ÁöÑÂ§ñÈÉ®ÂèòÈáèÁöÑÊåáÈíàÂíåÂ§ñÈÉ®ÂºïÁî®ÂèòÈáèÁöÑÊåáÈíàÊòØ‰∏ÄËá¥ÁöÑÔºåÊâÄ‰ª•Âú®<code>block</code>ÂÜÖÈÉ®‰øÆÊîπÂ§ñÈÉ®ÂºïÁî®ÂèòÈáèÁöÑÂÄºÊó∂ÔºåÊâÄÂºïÁî®ÁöÑÂ§ñÈÉ®ÂºïÁî®ÂèòÈáè‰πüÂèëÁîü‰∫ÜÂèòÂåñ„ÄÇ</p>
<p><strong>Áªº‰∏äÂæóÂà∞ÁöÑÁªìËÆ∫:</strong><code>block</code>ÂèØ‰ª•ÈÄöËøá<code>__block</code>Êù•‰øÆÊîπÂºïÁî®ÁöÑÂ§ñÈÉ®ÂèòÈáèÂÄº„ÄÇ</p>
<h3 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h3><h2 id="Â∫îÁî®Âú∫ÊôØ"><a href="#Â∫îÁî®Âú∫ÊôØ" class="headerlink" title="Â∫îÁî®Âú∫ÊôØ"></a>Â∫îÁî®Âú∫ÊôØ</h2><ul>
<li>ÂìçÂ∫î‰∫ã‰ª∂,Â¶Ç:ÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂ÁöÑÂÆûÁé∞Á≠â„ÄÇ</li>
<li>‰º†ÈÄíÊï∞ÊçÆ,Â¶Ç:‰∏™‰∫∫‰ø°ÊÅØÈ°µÈù¢AÔºåË∑≥ËΩ¨Âà∞ÁºñËæë‰∏™‰∫∫ËµÑÊñôÈ°µÈù¢BÔºåÂΩìÁºñËæëÈ°µÈù¢ÁºñËæëÂÆåÊàêÂêéÔºåpopÂà∞‰∏™‰∫∫‰ø°ÊÅØÈ°µÈù¢ÔºåÂèØ‰ª•‰ΩøÁî®<code>block</code>ËøõË°å‰∏™‰∫∫ËµÑÊñô‰ø°ÊÅØ‰º†ÂÄºÁ≠â„ÄÇ</li>
<li>ÈìæÂºèËØ≠Ê≥ïÔºåÂ¶Ç: ÂØπ<code>AutoLayout</code>ËøõË°åÂàÜË£ÖÁöÑÁ¨¨‰∏âÊñπÊ°ÜÊû∂<a href="https://github.com/cloudkite/Masonry" target="_blank" rel="noopener">Masonry</a>Á≠â„ÄÇ</li>
</ul>
<h2 id="Èù¢ËØïÁõ∏ÂÖ≥"><a href="#Èù¢ËØïÁõ∏ÂÖ≥" class="headerlink" title="Èù¢ËØïÁõ∏ÂÖ≥"></a>Èù¢ËØïÁõ∏ÂÖ≥</h2><h3 id="block‰∏∫‰ªÄ‰πàÈúÄË¶Å‰ΩøÁî®copyÊù•‰øÆÈ•∞"><a href="#block‰∏∫‰ªÄ‰πàÈúÄË¶Å‰ΩøÁî®copyÊù•‰øÆÈ•∞" class="headerlink" title="block‰∏∫‰ªÄ‰πàÈúÄË¶Å‰ΩøÁî®copyÊù•‰øÆÈ•∞?"></a><code>block</code>‰∏∫‰ªÄ‰πàÈúÄË¶Å‰ΩøÁî®<code>copy</code>Êù•‰øÆÈ•∞?</h3><p><code>block</code>ÈÄöËøáÂ≠òÂÇ®ÊñπÂºèÂèØ‰ª•ÂàÜ‰∏∫<code>Ê†àÂå∫block</code>,<code>Â†ÜÂå∫block</code>,<code>ÂÖ®Â±Äblock</code>„ÄÇ<code>block</code>Âú®<code>MRC</code>ÁéØÂ¢É‰∏ãÂ∏∏Áî®<code>copy</code>Êù•‰øÆÈ•∞ÔºåÂú®<code>MRC</code>‰∏≠Ôºå<code>block</code>ÁöÑÂÜÖÂ≠òÂú∞ÂùÄÊòæÁ§∫Âú®Ê†àÂå∫ÔºåÊ†àÂå∫ÁöÑÁâπÁÇπÊòØÂàõÂª∫ÁöÑÂØπË±°ÈöèÊó∂ÂèØËÉΩ‰ºöË¢´Á≥ªÁªüÈîÄÊØÅÔºå‰∏ÄÊó¶Ë¢´ÈîÄÊØÅÂêéÂÜçÊ¨°Ë∞ÉÁî®ÔºåÂèØËÉΩ‰ºöÈÄ†ÊàêÁ®ãÂ∫èCrash,ÂØπ<code>block</code>ËøõË°å<code>copy</code>ÂêéÔºåblock‰ºöË¢´Â≠òÊîæÂú®Â†ÜÂå∫ÔºåÂ≠òÊîæÂú®Â†Ü‰∏äÁöÑ<code>block</code>,‰πüÂ∞±Êúâ‰∫ÜÂºïÁî®ËÆ°Êï∞ÔºåÂêéÁª≠ÁöÑÂ§çÂà∂Êìç‰ΩúÈÉΩ‰∏ç‰ºöÁúüÁöÑÊâßË°åÂ§çÂà∂ÔºåËÄåÊòØÂ¢ûÂä†<code>block</code>ÂØπË±°ÁöÑÂºïÁî®ËÆ°Êï∞ÔºåËøôÊ†∑<code>block</code>Â∞±‰∏ç‰ºöË¢´Á≥ªÁªüÈîÄÊØÅÔºåËÄåÊòØÈúÄË¶ÅÂºÄÂèëËÄÖÈáäÊîæ‰∫ÜÔºàÂú®<code>MRC</code>‰∏≠ÂºïÁî®ËÆ°Êï∞ÈúÄË¶ÅÊâãÂä®ÁÆ°ÁêÜÔºåÂú®<code>ARC</code>‰∏≠ÂºïÁî®ËÆ°Êï∞ÂèØ‰ª•ÈÄöËøáÁ≥ªÁªüÁÆ°ÁêÜÔºâ„ÄÇÂú®<code>ARC</code>‰∏≠<code>Block</code>ÈÉΩ‰ºöÂú®Â†ÜÂå∫ÔºåÁ≥ªÁªü‰ºöÈªòËÆ§ÂØπ<code>block</code>ËøõË°å<code>copy</code>Êìç‰Ωú„ÄÇ</p>
<h3 id="block‰∏∫‰ªÄ‰πàÂ∏∏‰ΩøÁî®-blockÊù•ËÆøÈóÆÂ§ñÈÉ®ÂèòÈáè"><a href="#block‰∏∫‰ªÄ‰πàÂ∏∏‰ΩøÁî®-blockÊù•ËÆøÈóÆÂ§ñÈÉ®ÂèòÈáè" class="headerlink" title="block‰∏∫‰ªÄ‰πàÂ∏∏‰ΩøÁî®__blockÊù•ËÆøÈóÆÂ§ñÈÉ®ÂèòÈáè?"></a><code>block</code>‰∏∫‰ªÄ‰πàÂ∏∏‰ΩøÁî®<code>__block</code>Êù•ËÆøÈóÆÂ§ñÈÉ®ÂèòÈáè?</h3><p>Â§ñÈÉ®ÂèòÈáèÂèØËÉΩÂ≠òÂú®<code>Ê†à</code>ÂÜÖÂ≠ò‰∏≠ÔºåËÄå<code>block</code>Â≠òÂú®<code>Â†Ü</code>‰∏≠Ôºå<code>block</code>Ë¶ÅÊÉ≥ËÆøÈóÆÂ§ñÈÉ®ÂèòÈáèÔºåÈúÄË¶ÅÊää‰ªñ‰ª¨ÊîæÂú®Âêå‰∏ÄÂÜÖÂ≠òÁ©∫Èó¥‰∏≠Ôºå‰ΩøÁî®<code>__block</code>Êù•Â∞ÜÂ§ñÈÉ®ÂèòÈáèÊã∑Ë¥ùÂà∞<code>Â†ÜÂå∫</code>‰∏≠ÔºåÈÄöËøá<code>__block</code>‰øÆÈ•∞ÁöÑÂ§ñÈÉ®ÂºïÁî®ÂèòÈáèÁöÑÊåáÈíà‰ºöË¢´<code>block</code>ÊåÅÊúâÔºåÂΩìÈúÄË¶ÅÂú®<code>block</code>‰∏≠‰øÆÊîπÂ§ñÈÉ®ÂèòÈáèÊó∂ÔºåÈúÄË¶Å‰ΩøÁî®<code>__block</code>‰øÆÈ•∞Â§ñÈÉ®ÂèòÈáè„ÄÇ</p>
<h3 id="blockÂíådelegateÁöÑÂå∫Âà´Ôºü"><a href="#blockÂíådelegateÁöÑÂå∫Âà´Ôºü" class="headerlink" title="blockÂíådelegateÁöÑÂå∫Âà´Ôºü"></a><code>block</code>Âíå<code>delegate</code>ÁöÑÂå∫Âà´Ôºü</h3><p><code>block</code>Âíå<code>delegate</code>ÈÉΩÂ±û‰∫éÂõûË∞É,<code>block</code>Èù¢ÂêëÁªìÊûúÔºå<code>delegate</code>ÊòØÈù¢ÂêëËøáÁ®ãÁöÑ.</p>
<p><code>block</code>ÁöÑ‰ºòÁÇπ:<br>1.‰ª£Á†ÅÁ¥ßÂáëÔºåÂè™ÈúÄË¶ÅÂÆûÁé∞Â£∞ÊòéÂ±ûÊÄßÂíåÂÆûÁé∞Â∞±Ë°å‰∫ÜÔºõ<br>2.ÂÆÉÊòØ‰∏Ä‰∏™ËΩªÈáèÁ∫ßÁöÑÂõûË∞ÉÔºåÂèØ‰ª•Áõ¥Êé•ËÆøÈóÆ‰∏ä‰∏ãÊñáÔºåÁî±‰∫é<code>block</code>ÁöÑ‰ª£Á†ÅÊòØÂÜÖËÅîÁöÑÔºåÊâÄ‰ª•ËøêË°åÊïàÁéáÊõ¥È´òÔºåÂÆÉ‰πüÂèØ‰ª•ÊòØ‰∏Ä‰∏™ÂØπË±°ÔºåÂÆûÁé∞ÂåøÂêçÂáΩÊï∞ÁöÑÂäüËÉΩ„ÄÇ</p>
<p><code>block</code>ÁöÑÁº∫ÁÇπ:<br>1.<code>block</code>ÂÆπÊòìÈÄ†ÊàêÂæ™ÁéØÂºïÁî®ÔºåËÄå‰∏î‰∏çÊòìÂØüËßâÔºõ<br>2.<code>block</code>ËøêË°åÊàêÊú¨È´òÔºåÂú®Âá∫Ê†àÁöÑÊó∂ÂÄôÈúÄË¶ÅÂ∞Ü‰ΩøÁî®ÁöÑÊï∞ÊçÆ‰ªéÊ†àÊã∑Ë¥ùÂà∞Â†ÜÔºå‰ΩøÁî®ÂÆå‰πãÂêéÈúÄË¶ÅÁΩÆ‰∏∫<code>nil</code>„ÄÇ</p>
<p><code>delegate</code>ÁöÑ‰ºòÁÇπ:<br>1.‰ª£Á†ÅÂèØËØªÊÄßÊõ¥Âº∫ÔºåÂèØ‰ª•ÈÅøÂÖç‰∏çÂøÖË¶ÅÁöÑÂæ™ÁéØÂºïÁî®ÈóÆÈ¢òÔºõ<br>2.<code>delegate</code>Âè™‰øùÂ≠ò‰∏Ä‰∏™ÂØπË±°ÊåáÈíàÔºåÁõ¥Êé•ÂõûË∞ÉÔºåÊ≤°ÊúâÈ¢ùÂ§ñÂºÄÈîÄÔºõ</p>
<p><code>delegate</code>ÁöÑÁº∫ÁÇπ:<br>1.ÂÆûÁé∞‰∏äËæÉÂ§çÊùÇ‰∏Ä‰∫õÔºåÈúÄË¶ÅÂ£∞ÊòéÂçèËÆÆ„ÄÅÂ£∞Êòé‰ª£ÁêÜÂ±ûÊÄß„ÄÅÈÅµÂæ™ÂçèËÆÆ„ÄÅÂÆûÁé∞ÂçèËÆÆÈáåÁöÑÊñπÊ≥ïÁ≠âÔºõ<br>2.Â¶ÇÊûúÂ§ö‰∏™ÂØπË±°ËÆæÁΩÆÁöÑ‰ª£ÁêÜÊòØÂêå‰∏Ä‰∏™ÂØπË±°ÔºåÂ∞±ÈúÄË¶ÅÂú®delegateÊñπÊ≥ï‰∏≠Âà§Êñ≠ÂΩìÂâçÊâßË°å‰ª£ÁêÜÁöÑÊòØÂì™‰∏™ÂØπË±°Ôºõ</p>
<p>‰∏™‰∫∫ËßâÂæóÂú®ÈÄâÊã©<code>block</code>Âíå<code>delegate</code>‰∏äÂ§ßÂêåÂ∞èÂºÇÔºåÂèØ‰ª•ÈÅµÂæ™‰ºòÂÖà‰ΩøÁî®<code>block</code>;ÂΩìÂõûË∞ÉÁöÑÁä∂ÊÄÅÂæàÂ§öÁöÑÊó∂ÂÄôÔºåÂ§ö‰∫é3‰∏™‰ΩøÁî®<code>delegate</code>;Â¶ÇÊûúÂõûË∞ÉÁöÑÈ¢ëÁπÅÁöÑËØùÔºå‰πüÊòØ‰ΩøÁî®<code>delegate</code>ÁöÑÂéüÂàôÔºå‰∏çËøáÂú®ÂÆûÈôÖÂºÄÂèëËøáÁ®ã‰∏≠ÁöÑËØùÔºåÈÄÇÂêàÈÄâÊã©ÂõûË∞ÉÂ∞±Ë°åÔºåÂ¶ÇÊûúËÉΩÈÅøÂÖç‰∏ÄÂàá‰∏çÂ•ΩÁöÑ‰∫ãÊÉÖÂèëÁîüÁöÑËØùÔºåÊù°Êù°Â§ßË∑ØÈÉΩÈÄöÁΩóÈ©¨ÂíØ„ÄÇ</p>
<h1 id="ÊÄªÁªì-1"><a href="#ÊÄªÁªì-1" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h1><ul>
<li>‰ΩøÁî®<code>typedef</code>ÁªôÂ∏∏Áî®ÁöÑblockÂàõÂª∫Âà´ÂêçÔºå‰ª•‰æø‰∫éÂå∫ÂàÜÂíåËØªÂÜôÔºõ</li>
<li>Âú®‰ΩøÁî®<code>block</code>Êó∂Ê≥®ÊÑèÈÅøÂÖçÂæ™ÁéØÂºïÁî®„ÄÇ</li>
</ul>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/iOSÂºÄÂèë/" rel="tag"># iOSÂºÄÂèë</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/01/20/ÊàëÁêÜËß£ÁöÑÊ∑±Êã∑Ë¥ùÂíåÊµÖÊã∑Ë¥ù/" rel="next" title="ÊàëÁêÜËß£ÁöÑÊ∑±Êã∑Ë¥ùÂíåÊµÖÊã∑Ë¥ù">
                <i class="fa fa-chevron-left"></i> ÊàëÁêÜËß£ÁöÑÊ∑±Êã∑Ë¥ùÂíåÊµÖÊã∑Ë¥ù
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/02/14/Python‰∏≠ÁöÑ4ÁßçÂü∫Êú¨Á±ªÂûã/" rel="prev" title="Python‰∏≠ÁöÑ4ÁßçÊï∞ÊçÆÁªìÊûÑ">
                Python‰∏≠ÁöÑ4ÁßçÊï∞ÊçÆÁªìÊûÑ <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            ÊñáÁ´†ÁõÆÂΩï
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Á´ôÁÇπÊ¶ÇËßà
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Kity Pei</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">Êó•Âøó</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">ÂàÜÁ±ª</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">Ê†áÁ≠æ</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/kitypei" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="kity_pei@163.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#ÂâçË®Ä"><span class="nav-number">1.</span> <span class="nav-text">ÂâçË®Ä</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Ê≠£Êñá"><span class="nav-number">2.</span> <span class="nav-text">Ê≠£Êñá</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ÁÆÄ‰ªã"><span class="nav-number">2.1.</span> <span class="nav-text">ÁÆÄ‰ªã</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Ê¶ÇÂøµ"><span class="nav-number">2.1.1.</span> <span class="nav-text">Ê¶ÇÂøµ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ËØ≠Ê≥ï"><span class="nav-number">2.1.2.</span> <span class="nav-text">ËØ≠Ê≥ï</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ËØ≠Ê≥ïË°®ËææÂºè"><span class="nav-number">2.1.2.1.</span> <span class="nav-text">ËØ≠Ê≥ïË°®ËææÂºè</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#BlockÂá†ÁßçÂ∏∏ËßÅÂÜôÊ≥ï"><span class="nav-number">2.1.2.2.</span> <span class="nav-text">BlockÂá†ÁßçÂ∏∏ËßÅÂÜôÊ≥ï</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Êó†ËøîÂõûÂÄºÊó†ÂèÇÊï∞"><span class="nav-number">2.1.2.2.1.</span> <span class="nav-text">Êó†ËøîÂõûÂÄºÊó†ÂèÇÊï∞:</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Êó†ËøîÂõûÂÄºÊúâÂçï‰∏ÄÂèÇÊï∞"><span class="nav-number">2.1.2.2.2.</span> <span class="nav-text">Êó†ËøîÂõûÂÄºÊúâÂçï‰∏ÄÂèÇÊï∞</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Êó†ËøîÂõûÂÄºÊúâÂ§öÂèÇÊï∞"><span class="nav-number">2.1.2.2.3.</span> <span class="nav-text">Êó†ËøîÂõûÂÄºÊúâÂ§öÂèÇÊï∞</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ÊúâËøîÂõûÂÄºÊúâÂçï‰∏ÄÂèÇÊï∞"><span class="nav-number">2.1.2.2.4.</span> <span class="nav-text">ÊúâËøîÂõûÂÄºÊúâÂçï‰∏ÄÂèÇÊï∞</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ÊúâËøîÂõûÂÄºÊúâÂ§öÂèÇÊï∞"><span class="nav-number">2.1.2.2.5.</span> <span class="nav-text">ÊúâËøîÂõûÂÄºÊúâÂ§öÂèÇÊï∞</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Â∏∏ËßÅÁ±ªÂûã"><span class="nav-number">2.1.3.</span> <span class="nav-text">Â∏∏ËßÅÁ±ªÂûã</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Âæ™ÁéØÂºïÁî®"><span class="nav-number">2.2.</span> <span class="nav-text">Âæ™ÁéØÂºïÁî®</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Ê¶ÇÂøµ-1"><span class="nav-number">2.2.1.</span> <span class="nav-text">Ê¶ÇÂøµ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Ëß£ÂÜ≥ÊñπÊ°à"><span class="nav-number">2.2.2.</span> <span class="nav-text">Ëß£ÂÜ≥ÊñπÊ°à</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Ëß£ÂÜ≥ÊñπÊ°à‰∏Ä"><span class="nav-number">2.2.2.1.</span> <span class="nav-text">Ëß£ÂÜ≥ÊñπÊ°à‰∏Ä</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Ëß£ÂÜ≥ÊñπÊ°à‰∫å"><span class="nav-number">2.2.2.2.</span> <span class="nav-text">Ëß£ÂÜ≥ÊñπÊ°à‰∫å</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Ëß£ÂÜ≥ÊñπÊ°à‰∏â"><span class="nav-number">2.2.2.3.</span> <span class="nav-text">Ëß£ÂÜ≥ÊñπÊ°à‰∏â</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Â∫ïÂ±ÇÂéüÁêÜ"><span class="nav-number">2.3.</span> <span class="nav-text">Â∫ïÂ±ÇÂéüÁêÜ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Â∫ïÂ±ÇÁ†îÁ©∂ËøáÁ®ã"><span class="nav-number">2.3.1.</span> <span class="nav-text">Â∫ïÂ±ÇÁ†îÁ©∂ËøáÁ®ã</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ÊÄªÁªì"><span class="nav-number">2.3.2.</span> <span class="nav-text">ÊÄªÁªì</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Â∫îÁî®Âú∫ÊôØ"><span class="nav-number">2.4.</span> <span class="nav-text">Â∫îÁî®Âú∫ÊôØ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Èù¢ËØïÁõ∏ÂÖ≥"><span class="nav-number">2.5.</span> <span class="nav-text">Èù¢ËØïÁõ∏ÂÖ≥</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#block‰∏∫‰ªÄ‰πàÈúÄË¶Å‰ΩøÁî®copyÊù•‰øÆÈ•∞"><span class="nav-number">2.5.1.</span> <span class="nav-text">block‰∏∫‰ªÄ‰πàÈúÄË¶Å‰ΩøÁî®copyÊù•‰øÆÈ•∞?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#block‰∏∫‰ªÄ‰πàÂ∏∏‰ΩøÁî®-blockÊù•ËÆøÈóÆÂ§ñÈÉ®ÂèòÈáè"><span class="nav-number">2.5.2.</span> <span class="nav-text">block‰∏∫‰ªÄ‰πàÂ∏∏‰ΩøÁî®__blockÊù•ËÆøÈóÆÂ§ñÈÉ®ÂèòÈáè?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#blockÂíådelegateÁöÑÂå∫Âà´Ôºü"><span class="nav-number">2.5.3.</span> <span class="nav-text">blockÂíådelegateÁöÑÂå∫Âà´Ôºü</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ÊÄªÁªì-1"><span class="nav-number">3.</span> <span class="nav-text">ÊÄªÁªì</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2018 &mdash; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-snowflake-o"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Kity Pei</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">25.5k</span>
  
</div>



<div>
<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<span id="busuanzi_container_site_pv" style="display:none">
    Êú¨Á´ôÊÄªËÆøÈóÆÈáè <span id="busuanzi_value_site_pv"></span> Ê¨°
    <span class="post-meta-divider">|</span>
</span>
<span id="busuanzi_container_site_uv" style="display:none">
    Êúâ<span id="busuanzi_value_site_uv"></span>‰∫∫ÁúãËøáÊàëÁöÑÂçöÂÆ¢Âï¶
</span>
</div>







        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
